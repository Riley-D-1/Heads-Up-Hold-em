<!DOCTYPE html>
<html lang = "en">
<head>
    <meta name = "viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel = "stylesheet" href = "style.css">
</head>
<body>
	<canvas id="game_window" width="640" height="360"></canvas>
	<script>
		const canvas = document.getElementById("game_window")
		const ctx = canvas.getContext("2d")
		canvas.width = window.innerWidth
		canvas.height = window.innerHeight
		class bot{
			constructor(name,money,difficulty){
				this.name = name;
				this.money = money;
				this.difficulty = difficulty
			}
			get_money(){
				return this.money
			}
			get_name(){
				return this.name
			}
			gamble(round_num,priv_coins,public_coins){
				if (round_num === 1){
					if (priv_coins === "hh" ||priv_coins === "tt"){
						console.log(money/difficulty*Math.random())
						return (money/difficulty*Math.random())
					}
				}

				else{
					console.log("filler")
				}
			}
			buyin_pay(buyin_cost){
				if (money > buyin_cost){
					return `${this.name} paid`
				}
				else{
					//KILL Bot instance and leave table
					bot_leave_anim()
					clearInterval(); 
					return `${this.name} ran out of money and left the table`
				}
			}
		}
		function bot_leave_anim(){

		}
        function Coin_Flip(count){
			for (let i= 0; i < count; i++){
				let rand_num = Math.random();
				if (rand_num <= 0.5){
					console.log("heads");
					return "heads"
				}
				else{
					console.log("tails");
					return "tails"
				}
			}
        }

		function name_gen(num_of_names){
			// got a big ass list of random names and put some  fun ones in 
			const names = [
			"Liam", "Emma", "Noah", "Olivia", "Ava", "Elijah", "Sophia", "Lucas", "Isabella", "Mason",
			"Mia", "Ethan", "Charlotte", "Logan", "Amelia", "James", "Harper", "Benjamin", "Evelyn", "Jacob",
			"Abigail", "Michael", "Ella", "Alexander", "Scarlett", "Henry", "Grace", "Jackson", "Chloe", "Sebastian",
			"Luna", "Aiden", "Layla", "Matthew", "Aria", "Samuel", "Zoey", "David", "Nora", "Joseph",
			"Levi", "Hazel", "Owen", "Lily", "Wyatt", "Ellie", "John", "Aurora", "Daniel",
			"Gabriel", "Penelope", "Carter", "Victoria", "Jayden", "Hannah", "Luke", "Stella", "Anthony",
			"Isaac", "Savannah", "Grayson", "Brooklyn", "Julian", "Bella", "Lincoln", "Claire", "Nathan", "Skylar",
			"Christian", "Lucy", "Hunter", "Anna", "Connor", "Violet", "Aaron", "Charles", "Alice",
			// Weird but cool names
			"Blade", "Shadow", "Nova", "Onyx", "Echo", "Genesis"
			];
			const shuffled = names.sort(() => 0.5 - Math.random());
			return shuffled.slice(0, num_of_names);
		}

		function Game(player_count,buyin_cost){
			//fix me
				running = True
				bot_names = name_gen(player_count)
				let bot = []
				for (let i= 0; i > player_count; i++){
					let temp_bot = new bot(name_gen[i])
					bot.push(temp_bot)
				}
				while (running){
					if (bot_num != 0){
						let player_money = player_money - buyin_cost
					}
				}
			
		}

		
		function hand_check(hand){
			// example hand (make sure its six total) = ["h","t","h","t","h","t"]

			const heads_count = hand.filter(item => item === "h").length;
			const tails_count = hand.filter(item => item === "t").length;
			console.log(tails_count)
			console.log(heads_count)
			if (heads_count === tails_count){
				return "split"
			}else if (heads_count === 4|| tails_count ===4){
				return "Quad"
			} else if (heads_count === 5|| tails_count === 5){
				return "Five Frenzy"
			} else if (heads_count === 6||tails_count === 6 )
				return "Flipstorm"
		}
		function tie_break(tied_players){
			
			//logic to go here
		}

		function exitGame(){
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			window.location.href = 'index.html'
		}
		function draw_main_menu(){
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			const backgroundImage = new Image();
    		backgroundImage.src = 'menu.png';
			backgroundImage.onload = function() {
				ctx.drawImage(backgroundImage,0, 0, canvas.width, canvas.height );
			};
			const menuItems = [
				{ text: 'Play', sprite: playButtonSprite, x: 100, y: 150, action: startGame },
				{ text: 'Quit', sprite: exitButtonSprite, x: 100, y: 250, action: exitGame() }
    		];
		}
		function draw_rules_popup(){
			console.log("filler")
		}
		function draw_game(){
			console.log("filler")
		}
		
		function main_loop(){
			if (localStorage.getItem('Gems') === null){
				console.log("Gems reset to default amount")
				localStorage.setItem("Gems", 200);
			}else{
				console.log(localStorage.getItem('Gems'))
			}
			// clear the canvas when called
			
			gamestate = "main_menu"
			draw_main_menu()
			
			
			if (gamestate === "main_menu"){
				draw_main_menu()

			}
			else if (gamestate === "game"||gamestate === "playing"){
				Game(4,12)
				draw_rules_popup()
			}
			else{
				draw_bug_screen()
			}
		}
		window.onload = function(){
			console.log(name_gen(20))
			window.addEventListener('keydown', function(event) {
				if (event.key === 'esc') {
					console.log("Leave page")
					ctx.clearRect(0, 0, canvas.width, canvas.height);
					window.location.href = 'index.html';
				}
				});
		}
    </script>
	
</body>
</html>
